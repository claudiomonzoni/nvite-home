import{s as t}from"./index.fCeZaw72.js";import"./_commonjsHelpers.D6-XlEtG.js";import"./index.DE3JXa-m.js";const h=document.querySelector("#agrega-invitado-dialog"),I=h.dataset.ref,n=document.querySelector("#agregar-formu"),S=document.getElementById("agregar-invitado"),q=document.getElementById("cerrar-dialog"),o=document.querySelector("#agrega-invitado-dialog"),l=document.querySelector("#mensaje-vip-container"),d=document.querySelector("input[name='vip']");d?.addEventListener("change",()=>{l&&(l.style.display=d.checked?"block":"none")});S.addEventListener("click",()=>o.showModal());q.addEventListener("click",()=>o.close());o.addEventListener("click",a=>{a.target===a.currentTarget&&o.close()});n.addEventListener("submit",async a=>{if(a.preventDefault(),!n.querySelector("input[name='nombre']").value.trim()){alert("El nombre no puede estar vacío.");return}const r=parseInt(n.querySelector("input[name='pases']").value,10);if(isNaN(r)||r<1){alert("El número de pases debe ser un número positivo.");return}try{const e=new FormData(n),k=e.get("data-ref"),m=t(e.get("nombre")),u=t(e.get("pases")),g=t(e.get("mesa")),p=t(e.get("numeroWhats")),v=e?.get("confirmado")==="on",s=e?.get("vip")==="on",f=e?.get("InvitacionEnviada")==="on",y=e?.get("noAsiste")==="on",b=t(e.get("tipoInvitacion")),E=s?t(e.get("mensajePersonalizado")):null,i=await fetch("/api/addInvitados.json",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuarioId:I,nombre:m,pases:u,mesa:g,numeroWhats:p,confirmado:v,vip:s,InvitacionEnviada:f,noAsiste:y,tipoInvitacion:b,mensajePersonalizado:E})});if(!i.ok)throw location.reload(),new Error("Algo salió mal, se va a recargar la página, por favor vuelve a intentarlo, ingresa de nuevo al panel de invitados.");const c=await i.json();if(c.success)n.reset(),o.close(),location.reload();else throw new Error(c.message)}catch(e){e instanceof Error&&alert(e.message)}});
