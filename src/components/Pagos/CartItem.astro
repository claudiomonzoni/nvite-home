---
import { getProductPrice, type FinalCartItem } from "../../js/cart";
import { Icon } from "astro-icon/components";
import { Image } from "astro:assets";
import Btn from "../Btn.astro";

type Props = {
  cartItem: FinalCartItem;
};

const { cartItem } = Astro.props;

const { data } = cartItem.product;

const finalPrice = await getProductPrice(cartItem.product);
---

<li class="cart-item">
  <Image src={data.images[0]} alt={data.name} height={150} width={150} />
  <div class="grid-xs">
    <p>{finalPrice}</p>
    <h2>{data.name}</h2>
    <div class="cart-button-wrapper">
   
      <Btn 
         data-cart
        data-action="decrement"
        data-productid={data.id}
        aria-label={`Remove one ${data.name} from cart`}
        liga="#"
        texto=""
        clases="btn-oscuro"
        claro={false}
        icono="mdi:minus"
      />
      <p data-quantity data-productId={data.id}>{cartItem.quantity}</p>
      <Btn
         data-cart
        data-action="increment"
        data-productid={data.id}
        aria-label={`Add one ${data.name} to cart`}
        liga="#"
        texto=""
        clases="btn-oscuro"
        claro={false}
        icono="mdi:plus"
      />
    
    </div>
  </div>
</li>
<style>
  .cart-button-wrapper {
    display: flex;
    align-items: center;
    gap: 1rem;
  }
</style>