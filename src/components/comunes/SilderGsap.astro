---
---
<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";

  gsap.registerPlugin(ScrollTrigger);

  setTimeout(() => {
    const slides = document.querySelectorAll(".galeSlider p img");
    
    // Configuración inicial de las imágenes
    slides.forEach((slide, index) => {
      gsap.set(slide, {
        position: "absolute",
        top: "50%",
        left: "50%",
        xPercent: -50,
        yPercent: -50,
        zIndex: slides.length - index,
        opacity: index === 0 ? 1 : 0
      });
    });

    // Timeline para el efecto de scroll
    const tl = gsap.timeline({
      scrollTrigger: {
        trigger: ".galeSlider",
        start: "top top",
        end: `+=${slides.length * 100}%`,
        scrub: 1,
        pin: true,
        anticipatePin: 1,
        snap: {
          snapTo: 1 / (slides.length - 1),
          duration: { min: 0.2, max: 0.5 },
          ease: "power1.inOut"
        },
        onUpdate: (self) => {
          gsap.to(".progress-bar", {
            width: `${self.progress * 100}%`,
            duration: 0.1
          });
        }
      },
    });

    // Animaciones para cada slide
    slides.forEach((slide, index) => {
      if (index < slides.length - 1) {
        tl.to(slide, {
          opacity: 0,
          scale: 1.2,
          duration: 1,
        })
        .to(slides[index + 1], {
          opacity: 1,
          scale: 1,
          duration: 1,
        }, "<");
      }
    });
  }, 0);
</script>

<style>
  .progress-bar-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background: rgba(255, 255, 255, 0.2);
    z-index: 1000;
  }

  .progress-bar {
    height: 100%;
    width: 0;
    height: 5px;
    background: #696969;
  }

  .galeSlider {
    position: relative;
    height: 100vh;
    width: 100%;
    overflow: hidden;
  }

  .galeSlider p {
    margin: 0;
    width: 100%;
    height: 100%;
  }

  .galeSlider img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
  }
</style>

<div class="galeSlider">
  <div class="progress-bar-container">
    <div class="progress-bar"></div>
  </div>
  <slot />
</div>



