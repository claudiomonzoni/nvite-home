---
interface Theme {
    name?: string;
    colors?: {
        primary?: string;
        secondary?: string;
        accent?: string;
        background?: string;
        text?: string;
    };
    typography?: {
        heading?: string;
        body?: string;
    };
}

interface Props {
    title: string;
    url?: string;
    cover?: string;
    paleta?: string;
    theme?: Theme;
}
const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const { title, url, cover, paleta, theme } = Astro.props;
const { name, colors, typography } = theme || {};

// Generar CSS personalizado solo si hay valores
const customStyles: string[] = [];

// Colores personalizados
if (colors) {
    if (colors.primary) customStyles.push(`--primario: ${colors.primary};`);
    if (colors.secondary)
        customStyles.push(`--secundario: ${colors.secondary};`);
    if (colors.accent) customStyles.push(`--acento: ${colors.accent};`);
    if (colors.background) customStyles.push(`--fondo: ${colors.background};`);
    if (colors.text) customStyles.push(`--texto: ${colors.text};`);
}

// Tipografías personalizadas
if (typography) {
    if (typography.heading)
        customStyles.push(`--font-heading: '${typography.heading}', serif;`);
    if (typography.body)
        customStyles.push(`--font-body: '${typography.body}', sans-serif;`);
}

// Generar links de Google Fonts si hay tipografías personalizadas
const fontLinks: string[] = [];
if (typography?.heading) {
    const fontName = typography.heading.replace(/ /g, "+");
    fontLinks.push(
        `https://fonts.googleapis.com/css2?family=${fontName}&display=swap`,
    );
}
if (typography?.body) {
    const fontName = typography.body.replace(/ /g, "+");
    fontLinks.push(
        `https://fonts.googleapis.com/css2?family=${fontName}&display=swap`,
    );
}

const portadaOG = cover
    ? `${cover.split("?")[0]}?v=${new Date().getTime()}`
    : "";

import "../../estilos/quince/redireccion.scss";
---

<!doctype html>
<html lang="es" data-paleta={paleta} data-theme={name}>
    <head>
        <meta charset="UTF-8" />
        <meta
            name="description"
            content="Celebra tus XV años con invitaciones digitales únicas y fáciles de compartir. Sorprende a tus invitados con diseños increíbles y gestiona tu evento sin complicaciones con Nvitaciones."
        />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href={`/favicon.svg`} />
        <link rel="canonical" href={canonicalURL} />
        <meta name="generator" content={Astro.generator} />
        <meta name="generator" content={Astro.generator} />
        <title>{title}</title>
        <meta property="og:locale" content="es_MX" />
        <meta property="og:type" content="article" />
        <meta property="og:title" content=`${title} - nvitaciones.com` />
        <meta
            property="og:description"
            content=`Esperamos tu asistencia, estaremos felices de celebrar juntos`
        />
        <meta property="og:url" content={url} />
        <meta
            property="og:site_name"
            content="nvitaciones.com invitaciones de XV años digitales"
        />
        <meta property="og:image" content={portadaOG} />
        <meta property="og:image:width" content="900" />
        <meta property="og:image:height" content="900" />
        <meta property="og:image:type" content="image/webp" />
        <meta name="twitter:card" content="summary_large_image" />

        <!-- Fuentes personalizadas de Google Fonts -->
        {fontLinks.map((link) => <link rel="stylesheet" href={link} />)}

        <!-- Estilos personalizados -->
        {
            customStyles.length > 0 && (
                <style
                    set:html={`
                :root[data-paleta="${paleta}"][data-theme="${name}"] {
                    ${customStyles.join("\n                    ")}
                }
            `}
                />
            )
        }
    </head>
    <!-- Hotjar Tracking Code for Sitio 5048561 (falta el nombre)
<script>
  (function(h,o,t,j,a,r){
      h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
      h._hjSettings={hjid:5048561,hjsv:6};
      a=o.getElementsByTagName('head')[0];
      r=o.createElement('script');r.async=1;
      r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
      a.appendChild(r);
  })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script> -->

    <body>
        <slot />
    </body>
</html>
